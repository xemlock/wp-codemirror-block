void 0===window.wpcm.editors&&(window.wpcm.editors=[]),function(e,t,o){"use strict";t.frontEndInitialization=function(){for(var o=document.querySelectorAll(".code-block > pre.CodeMirror"),n=0;n<o.length;n++){var r=o[n],d=JSON.parse(r.dataset.setting),c=o[n].textContent,i="code-block-"+n;r.setAttribute("id",i),t.codeMirrorInit(i,c,d)}e(document.body).trigger("wpcm_editors_loaded")},t.codeMirrorInit=function(n,r,d){var c=document.getElementById(n);c.style="display: none";var i=o(c.parentNode,{lineNumbers:d.lineNumbers,lineWrapping:d.lineWrapping,readOnly:d.readOnly,scrollbarStyle:"simple"});if(o.autoLoadAddon(i,d),o.autoLoadTheme(i,d.theme),i.setValue(r),d.disableCopy&&i.setOption("readOnly","nocursor"),i.setOption("mode",d.mime),i.setOption("theme",d.theme),d.styleActiveLine&&(i.on("blur",e=>{i.setOption("styleActiveLine",!1)}),i.on("focus",e=>{i.setOption("styleActiveLine",d.styleActiveLine)})),o.autoLoadMode(i,d.mode),!d.readOnly){t.renderTextarea(c,r,i);var u=["htmlembedded","htmlmixed","css","javascript","sass","xml","jsx","vue"];window.wpcm.options.output.button&&u.includes(d.mode)&&t.renderOutputBlock(c)}t.editors.push(i),e(document.body).trigger("wpcm_editor_loaded",[i])},t.renderTextarea=function(e,t,o){var n=document.createElement("textarea");n.className="editor",n.style="display: none",n.value=t,e.parentNode.append(n),o.on("blur",e=>{n.value=o.getValue()})},t.executeCode=function(e){var t=this.parentElement,o=t.querySelector("textarea.editor"),n=t.querySelector(".output-block-frame"),r=null;n.classList.add("show"),r=n.contentWindow?n.contentWindow:n.contentDocument.document?n.contentDocument.document:n.contentDocument,r.document.open(),r.document.write(o.value),r.document.close()},t.styleOutputBlock=function(e){var t=e.target,o=null,n=0;o=t.contentWindow?t.contentWindow:t.contentDocument.document?t.contentDocument.document:t.contentDocument,t.setAttribute("style","height:200px"),o.document.body?(n=Math.round(o.document.body.scrollHeight)+25,n>200&&t.setAttribute("style","height:"+n+"px")):t.setAttribute("style","height:70vh")},t.renderOutputBlock=function(e){var o=document.createElement("button"),n=document.createElement("iframe");o.className="execute-code",o.onclick=t.executeCode,o.textContent=window.wpcm.options.output.button_text||"Run",n.className="output-block-frame",n.onload=t.styleOutputBlock,n.style.height="100px",n.src="",e.parentNode.append(o),e.parentNode.append(n)}}(window.jQuery,window.wpcm,window.CodeMirror),wpcm.frontEndInitialization(),jQuery(document).ready(function(){setTimeout(()=>{for(var e=0;e<wpcm.editors.length;e++)wpcm.editors[e].refresh()},1e3)});