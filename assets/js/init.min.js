void 0===window.wpcm.editors&&(window.wpcm.editors=[]),function(e,t,o){"use strict";t.executable_output_mode=["htmlmixed","javascript","xml","jsx","vue"],t.frontEndInitialization=function(){var o=document.querySelectorAll(".code-block > pre.CodeMirror");t.addNotice();for(var n=0;n<o.length;n++){var i=o[n],d=JSON.parse(i.dataset.setting),c=o[n].textContent,r="code-block-"+n;o[n].parentNode.setAttribute("id",n),i.setAttribute("id",r),t.codeMirrorInit(r,c,d,n)}e(document.body).trigger("wpcm_editors_loaded")},t.codeMirrorInit=function(n,i,d){var c=document.getElementById(n);c.style="display: none";var r=o(c.parentNode,{lineNumbers:d.lineNumbers,lineWrapping:d.lineWrapping,readOnly:d.readOnly,scrollbarStyle:"simple",firstLineNumber:d.firstLineNumber?Math.abs(d.firstLineNumber):1});o.autoLoadTheme(r,d.theme),r.setValue(i),d.disableCopy&&r.setOption("readOnly","nocursor"),r.setOption("mode",d.mime),r.setOption("theme",d.theme),d.styleActiveLine&&(r.on("blur",e=>{r.setOption("styleActiveLine",!1)}),r.on("focus",e=>{r.setOption("styleActiveLine",d.styleActiveLine)})),o.autoLoadMode(r,d.mode),t.options.panel.controlPanel&&(r.getWrapperElement().querySelector(".CodeMirror-simplescroll-vertical").classList.add("adjest-top"),t.addPanel(r,d)),t.executable_output_mode.includes(d.mode)&&t.renderOutputBlock(c),t.editors.push(r),e(document.body).trigger("wpcm_editor_loaded",[r])},t.addNotice=function(){var e=document.createElement("div");e.className="CodeMirror-notice",document.body.appendChild(e)},t.showNotice=function(e,t){var o=document.querySelector(".CodeMirror-notice");o.innerHTML=e,o.setAttribute("style",["bottom: 15px;"].join("")),setTimeout(()=>{o.removeAttribute("style")},3e3)},t.addPanel=function(e,o){var n=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),c=document.createElement("span"),r=e.getWrapperElement();if(n.className="CodeMirror-panel",i.className="info-panel",c.textContent=o.fileName?o.fileName:o.language,d.className="control-panel",c.className="language "+o.language.toLowerCase(),i.appendChild(c),window.wpcm.options.panel.runButton&&t.executable_output_mode.includes(o.mode)){var a=document.createElement("span"),l=document.createElement("b");a.classList="tool",a.setAttribute("data-tip","Execute Code"),l.className="run-code execute-code",a.onclick=t.executeCode,a.appendChild(l),d.appendChild(a)}if(window.wpcm.options.panel.fullScreenButton){var s=document.createElement("span"),u=document.createElement("b");s.classList="tool",s.setAttribute("data-tip","Full Screen"),u.className="fullscreen maximize",u.onclick=t.setFullScreen,s.appendChild(u),d.appendChild(s)}if(window.wpcm.options.panel.copyButton&&!o.disableCopy){var m=document.createElement("span"),p=document.createElement("b");m.classList="tool",m.setAttribute("data-tip","Copy Code"),p.className="copy",p.onclick=t.copyToClipboard,m.appendChild(p),d.appendChild(m)}i.appendChild(d),n.appendChild(i),r.insertBefore(n,r.firstChild)},t.executeCode=function(o){var n=this,i=n.closest(".code-block"),d=i.id,c=t.editors[d],r=c.getValue(),a=i.querySelector(".output-block-frame"),l=null;a.classList.add("show"),l=a.contentWindow?a.contentWindow:a.contentDocument.document?a.contentDocument.document:a.contentDocument,l.document.open(),l.document.write(r),l.document.close(),e("html, body").animate({scrollTop:e(a).offset().top-80},600)},t.styleOutputBlock=function(e){var t=e.target,o=null,n=0;t.classList.contains("first-load")?t.classList.remove("first-load"):(o=t.contentWindow?t.contentWindow:t.contentDocument.document?t.contentDocument.document:t.contentDocument,t.setAttribute("style","height:200px"),o.document.body?(n=Math.round(o.document.body.scrollHeight)+25,n>200&&t.setAttribute("style","height:"+n+"px")):t.setAttribute("style","height:70vh"))},t.renderOutputBlock=function(e){var o=document.createElement("iframe");o.classList.add("output-block-frame","first-load"),o.onload=t.styleOutputBlock,o.style.height="100px",o.src="",e.parentNode.append(o)},t.setFullScreen=function(){var e=this,o=e.closest(".code-block"),n=o.id,i=t.editors[n],d=document.getElementById("wpadminbar");e.classList.contains("maximize")?(e.classList.remove("maximize"),e.classList.add("restore"),e.closest(".CodeMirror").classList.add("CodeMirror-fullscreen"),void 0!==d&&null!=d&&e.closest(".CodeMirror").classList.add("adjest-top"),document.documentElement.style.overflow="hidden"):(e.classList.remove("restore"),e.classList.add("maximize"),e.closest(".CodeMirror").classList.remove("CodeMirror-fullscreen","adjest-top"),document.documentElement.style.overflow=""),i.refresh()},t.copyToClipboard=function(){var e=this,o=e.closest(".code-block"),n=o.id,i=t.editors[n].getValue();if(window.clipboardData)window.clipboardData.setData("Text",i);else{var d=document.createElement("textarea");d.className="CodeMirror-ClipBoard",document.body.appendChild(d),d.appendChild(document.createTextNode(i)),d.select();try{var c=document.execCommand("copy"),r=c?"Copied to cliboard":"Can not copied"}catch(e){r="Oops, unable to copy"}t.showNotice(r,""),d.remove()}}}(window.jQuery,window.wpcm,window.CodeMirror),wpcm.frontEndInitialization(),jQuery(document).ready(function(){setTimeout(()=>{for(var e=0;e<wpcm.editors.length;e++)wpcm.editors[e].refresh()},1500)});